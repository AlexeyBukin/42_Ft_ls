# ecole 42 project | school 21 project
# proj_example Makefile
# @kcharla, 2020

NAME = myexe

BUILD_DIR = build
SRC_DIR = src

# find src -type f -name '*.c' | sed "s/\$/ \\\\/"
SRC_FILES = \
src/main.c\
src/inn/second.c

OBJ_FILES = $(SRC_FILES:$(SRC_DIR)/%.c=$(BUILD_DIR)/%.o)

DEPDIR := $(BUILD_DIR)/.deps
DEPFLAGS = -MT $@ -MMD -MP -MF $(DEPDIR)/$*.d

.PHONY: all

all: $(NAME)

$(NAME): $(OBJ_FILES)
	gcc $(OBJ_FILES) -o myexe

$(BUILD_DIR)/%.o : $(SRC_DIR)/%.c $(DEPDIR)/%.d
	mkdir -p $(@D)
	gcc $(DEPFLAGS) -c $< -o $@ -I include

$(DEPDIR)/%.d:
	mkdir -p $(@D)
	echo you need name

DEPFILES := $(SRC_FILES:$(SRC_DIR)/%.c=$(DEPDIR)/%.d)

$(DEPFILES):

include $(wildcard $(DEPFILES))